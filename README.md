# GamesAlgorithms
# Стратегия: Artyom with Masha (Probabilistic Endgame)

Этот репозиторий содержит JavaScript код для алгоритма игрока `Artyom with Masha (Probabilistic Endgame)`, разработанного для соревнования по теории игр в стиле повторяющейся "Дилеммы заключенного". Алгоритм является частью команды `LoveTriangle`.

## Обзор Стратегии

Алгоритм `Artyom with Masha` использует смешанную стратегию, которая адаптируется в зависимости от раунда и поведения оппонента:

1.  **Начальная фаза (Раунды 1-15):** Начинает с сотрудничества и проявляет ограниченную терпимость к предательству оппонента.
2.  **Реакция на предательство:** Если оппонент предает слишком много раз в начале игры или предает в середине/конце игры, алгоритм переключается на постоянное предательство.
3.  **Поздняя фаза (Раунды 16+):** Если оппонент не предавал (или предавал в пределах допустимого порога в начале), алгоритм переходит к вероятностному подходу. Шанс предать постепенно увеличивается с каждым раундом, чтобы адаптироваться к неизвестной длине матча (предполагается от 16 до 24 раундов).
4.  **Взаимодействие с командой:** Всегда сотрудничает с игроками из своей команды (`MY_TEAM_NAME`).

## Детальная Логика (`move` функция)

Решение о ходе принимается следующим образом:

1.  **Проверка Команды:**
    * Если `round.opponentTeam === MY_TEAM_NAME`, всегда возвращает `FIGHTER_MODE.cooperate`.

2.  **Раунды 1-15:**
    * Считает количество предательств оппонента (`this.betrayCount`).
    * Если `this.betrayCount < this.trustThreshold` (где `trustThreshold = 2`), возвращает `FIGHTER_MODE.cooperate`.
    * Если `this.betrayCount >= this.trustThreshold`, возвращает `FIGHTER_MODE.compete`.

3.  **Раунды 16 и далее:**
    * **Проверка на необратимое предательство:**
        * Если `this.hasBeenBetrayedBefore16` (оппонент предал в раундах 1-15) ИЛИ `this.hasBeenBetrayedAfter15` (оппонент предал в раундах 16+), возвращает `FIGHTER_MODE.compete` до конца игры.
    * **Вероятностный Эндшпиль (если не был предан):**
        * Если предыдущие условия не выполнены, рассчитывается вероятность предательства (`defectProbability`):
            ```
            defectProbability = (round.roundNum - 15) / (24 - 15)
            ```
            Эта вероятность линейно растет от `1/9` (≈11%) в раунде 16 до `9/9` (100%) в раунде 24.
        * Генерируется случайное число: `Math.random()`.
        * Если `Math.random() < defectProbability`, возвращает `FIGHTER_MODE.compete`.
        * В противном случае, возвращает `FIGHTER_MODE.cooperate`.

## Отслеживание Состояния (`moveResult` и `init`)

Алгоритм использует внутренние переменные для отслеживания состояния игры:

* `betrayCount`: int - Счетчик, сколько раз оппонент выбрал `FIGHTER_MODE.compete`.
* `trustThreshold`: int (значение = 2) - Максимальное количество предательств, которые алгоритм "прощает" в первых 15 раундах.
* `hasBeenBetrayedBefore16`: boolean - Флаг, устанавливаемый в `true`, если оппонент предал хотя бы раз в раундах с 1 по 15.
* `hasBeenBetrayedAfter15`: boolean - Флаг, устанавливаемый в `true`, если оппонент предал хотя бы раз в раундах с 16 и далее.

Функция `init` сбрасывает эти переменные в начальное состояние перед каждым новым матчем. Функция `moveResult` обновляет эти переменные после каждого раунда на основе хода оппонента.

## Как Использовать

Код предоставляет функцию `getArtyomXMasha()`, которая возвращает объект игрока (`gtactor`). Этот объект может быть интегрирован в игровую среду соревнования. Убедитесь, что константы `FIGHTER_MODE` (объект с `cooperate: 0, compete: 1`) и `MY_TEAM_NAME` (строка с именем вашей команды) определены и доступны в области видимости функции.
